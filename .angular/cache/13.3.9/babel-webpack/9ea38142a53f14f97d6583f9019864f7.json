{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Persona } from 'src/app/models/persona';\nimport { PersonaService } from 'src/app/services/persona.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/persona.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../personas/personas.component\";\nimport * as i5 from \"../persona/persona.component\";\nconst _c0 = [\"listadoPersonas\"];\nexport let TxtPersonaComponent = /*#__PURE__*/(() => {\n  class TxtPersonaComponent {\n    constructor(_personaService) {\n      this._personaService = _personaService;\n      this.nombrePersona = '';\n      /**\n       * Propiedades del diseño\n       */\n\n      this.persona = new Persona();\n      this.labelPersona = '';\n      this.personaSeleccionada = new EventEmitter();\n      this.modalConsultarPersonasActivo = false;\n      this.modalCrearPersonaActivo = false;\n      this.labels = {\n        numeroDocumento: 'Número de documento',\n        nombreCompleto: 'Nombre completo / Razón social'\n      };\n    }\n\n    ngOnInit() {}\n\n    ngAfterViewInit() {\n      setTimeout(() => {\n        this.listadoPersonas.altoTabla = 300;\n      });\n    }\n\n    consultarPersonaPorNumeroDocumento() {\n      if (!!this.persona.numeroDocumento) {\n        this._personaService.consultarPorNumeroDocumento(this.persona.numeroDocumento).subscribe(result => {\n          if (result.resultado) {\n            this.persona = new Persona();\n            this.nombrePersona = '';\n            this.persona.inicializar(result.datos);\n            this.nombrePersona = !!this.persona.razonSocial ? this.persona.razonSocial : this.persona.nombres + ' ' + this.persona.apellidos;\n            this.onPersonaSeleccionada();\n          }\n        });\n      } else {\n        this.persona = new Persona();\n        this.nombrePersona = '';\n        this.onPersonaSeleccionada();\n      }\n    }\n\n    consultarPersonaPorId() {\n      this._personaService.consultarPorId(this.persona.id).subscribe(result => {\n        if (result.resultado) {\n          this.persona = new Persona();\n          this.nombrePersona = '';\n          this.persona.inicializar(result.datos);\n          this.nombrePersona = !!this.persona.razonSocial ? this.persona.razonSocial : this.persona.nombres + ' ' + this.persona.apellidos;\n        }\n      });\n    }\n\n    personaSeleccionadaEnListado(id) {\n      this.persona.id = id;\n      this.consultarPersonaPorId();\n      this.cerrarModalConsultarPersonas();\n      this.onPersonaSeleccionada();\n    }\n\n    abrirModalConsultarPersonas() {\n      if (this.consultarEmpleados == true) {\n        this.listadoPersonas.consultarEmpleados();\n      } else {\n        if (this.tipoPersona) {\n          this.listadoPersonas.consultarListadoPorTipo(this.tipoPersona);\n        } else {\n          this.listadoPersonas.consultarListado();\n        }\n      }\n\n      this.modalConsultarPersonasActivo = true;\n    }\n\n    cerrarModalConsultarPersonas() {\n      this.modalConsultarPersonasActivo = false;\n    }\n\n    abrirModalCrearPersona() {\n      this.modalCrearPersonaActivo = true;\n    }\n\n    cerrarModalCrearPersona() {\n      this.modalCrearPersonaActivo = false;\n    }\n\n    personaCreada(persona) {\n      this.persona = persona;\n      this.nombrePersona = !!this.persona.razonSocial ? this.persona.razonSocial : this.persona.nombres + ' ' + this.persona.apellidos;\n      this.cerrarModalCrearPersona();\n    }\n\n    onPersonaSeleccionada() {\n      this.personaSeleccionada.emit(this.persona);\n    }\n\n  }\n\n  TxtPersonaComponent.ɵfac = function TxtPersonaComponent_Factory(t) {\n    return new (t || TxtPersonaComponent)(i0.ɵɵdirectiveInject(i1.PersonaService));\n  };\n\n  TxtPersonaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TxtPersonaComponent,\n    selectors: [[\"app-txt-persona\"]],\n    viewQuery: function TxtPersonaComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.listadoPersonas = _t.first);\n      }\n    },\n    inputs: {\n      nombrePersona: \"nombrePersona\",\n      persona: \"persona\",\n      labelPersona: \"labelPersona\",\n      tipoPersona: \"tipoPersona\",\n      consultarEmpleados: \"consultarEmpleados\"\n    },\n    outputs: {\n      personaSeleccionada: \"personaSeleccionada\"\n    },\n    features: [i0.ɵɵProvidersFeature([PersonaService])],\n    decls: 29,\n    vars: 9,\n    consts: [[1, \"field\", \"is-horizontal\"], [1, \"field-label\", \"is-normal\"], [1, \"level-left\"], [1, \"field-body\"], [1, \"field\", \"is-grouped\"], [1, \"control\"], [\"type\", \"text\", \"name\", \"numeroDocumento\", 1, \"input\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\", \"blur\"], [1, \"control\", \"is-expanded\"], [\"type\", \"text\", \"name\", \"nombreCompleto\", \"disabled\", \"\", 1, \"input\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [1, \"button\", \"is-primary\", 3, \"click\"], [1, \"icon\", \"is-small\"], [1, \"fas\", \"fa-search\"], [1, \"fas\", \"fa-plus\"], [3, \"ngClass\"], [1, \"modal-background\", 3, \"click\"], [1, \"modal-content\", \"modal-listado\"], [1, \"box\"], [3, \"esBuscador\", \"personaSeleccionada\"], [\"listadoPersonas\", \"\"], [3, \"creacionPersona\", \"personaCreada\"]],\n    template: function TxtPersonaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function TxtPersonaComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.persona.numeroDocumento = $event;\n        })(\"blur\", function TxtPersonaComponent_Template_input_blur_7_listener() {\n          return ctx.consultarPersonaPorNumeroDocumento();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function TxtPersonaComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.nombrePersona = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 5)(11, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TxtPersonaComponent_Template_button_click_11_listener() {\n          return ctx.abrirModalConsultarPersonas();\n        });\n        i0.ɵɵelementStart(12, \"span\", 10);\n        i0.ɵɵelement(13, \"i\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 5)(15, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TxtPersonaComponent_Template_button_click_15_listener() {\n          return ctx.abrirModalCrearPersona();\n        });\n        i0.ɵɵelementStart(16, \"span\", 10);\n        i0.ɵɵelement(17, \"i\", 12);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(18, \"div\", 13)(19, \"div\", 14);\n        i0.ɵɵlistener(\"click\", function TxtPersonaComponent_Template_div_click_19_listener() {\n          return ctx.cerrarModalConsultarPersonas();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 15)(21, \"div\", 16)(22, \"app-personas\", 17, 18);\n        i0.ɵɵlistener(\"personaSeleccionada\", function TxtPersonaComponent_Template_app_personas_personaSeleccionada_22_listener($event) {\n          return ctx.personaSeleccionadaEnListado($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(24, \"div\", 13)(25, \"div\", 14);\n        i0.ɵɵlistener(\"click\", function TxtPersonaComponent_Template_div_click_25_listener() {\n          return ctx.cerrarModalCrearPersona();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 15)(27, \"div\", 16)(28, \"app-persona\", 19);\n        i0.ɵɵlistener(\"personaCreada\", function TxtPersonaComponent_Template_app_persona_personaCreada_28_listener($event) {\n          return ctx.personaCreada($event);\n        });\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.labelPersona);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.labels.numeroDocumento);\n        i0.ɵɵproperty(\"ngModel\", ctx.persona.numeroDocumento);\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.labels.nombreCompleto);\n        i0.ɵɵproperty(\"ngModel\", ctx.nombrePersona);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", ctx.modalConsultarPersonasActivo ? \"modal is-active\" : \"modal\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"esBuscador\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.modalCrearPersonaActivo ? \"modal is-active\" : \"modal\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"creacionPersona\", true);\n      }\n    },\n    directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.NgClass, i4.PersonasComponent, i5.PersonaComponent],\n    styles: [\"\"]\n  });\n  return TxtPersonaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}